version: '3.7'

x-default: &default
  restart: unless-stopped
  env_file: ./config/.env

services:

  wp:
    <<: *default
    build: ./config
    ports:
      - 80:80
    volumes:
        - ./config/uploads.ini:/usr/local/etc/php/conf.d/uploads.ini:ro
        - ./data/wp:/var/www/html
        - ./theme:/var/www/html/wp-content/themes/theme:ro

  db:
    <<: *default
    image: mariadb:10.3
    volumes:
      - ./data/db:/var/lib/mysql